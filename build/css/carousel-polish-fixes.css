/* ========================================
   CAROUSEL POLISH FIXES - VERSION 2
   Correcciones finales de estilo
   ======================================== */

@media (max-width: 768px) {
    
    /* === FIX 1: INDICADORES MÁS PEQUEÑOS === */
    .carousel-indicators {
        background: transparent !important;
        backdrop-filter: none !important;
        padding: 6px 8px !important;
        border-radius: 0 !important;
        box-shadow: none !important;
        margin-top: 12px !important;
    }
    
    .carousel-indicator {
        width: 6px !important;
        height: 6px !important;
        background: rgba(255, 255, 255, 0.4) !important;
        border: none !important;
        box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2) !important;
        transition: all 0.3s ease !important;
    }
    
    .carousel-indicator.active {
        width: 16px !important;
        border-radius: 3px !important;
        background: rgba(255, 255, 255, 0.9) !important;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3) !important;
    }
    
    .dark-mode .carousel-indicator {
        background: rgba(255, 255, 255, 0.25) !important;
    }
    
    .dark-mode .carousel-indicator.active {
        background: rgba(129, 140, 248, 0.85) !important;
        box-shadow: 0 1px 3px rgba(129, 140, 248, 0.4) !important;
    }
    
    /* === FIX 2: ELIMINAR LÍNEAS MORADAS COMPLETAMENTE === */
    .carousel-container::before,
    .carousel-container::after,
    .levels-carousel-container::before,
    .levels-carousel-container::after {
        content: none !important;
        display: none !important;
        opacity: 0 !important;
        visibility: hidden !important;
    }
    
    /* === FIX 3: FADE MEJORADO - OCULTAR AL SCROLLEAR === */
    .carousel-container,
    .levels-carousel-container {
        overflow: hidden !important;
        position: relative !important;
        padding: 0 !important;
        margin-left: 0 !important;
        margin-right: 0 !important;
    }
    
    .carousel-container .levels-grid,
    .carousel-container .features-grid,
    .carousel-container .tech-grid,
    .carousel-container .screenshots-grid,
    .levels-carousel-container .levels-grid {
        overflow-x: scroll !important;
        overflow-y: hidden !important;
        scroll-behavior: smooth !important;
        padding: 10px 20px 20px 20px !important;
        margin: 0 -20px !important;
        width: calc(100% + 40px) !important;
        
        /* Fade agresivo en los bordes */
        -webkit-mask-image: linear-gradient(
            to right,
            transparent 0px,
            black 20px,
            black calc(100% - 20px),
            transparent 100%
        ) !important;
        mask-image: linear-gradient(
            to right,
            transparent 0px,
            black 20px,
            black calc(100% - 20px),
            transparent 100%
        ) !important;
    }
    
    /* === FIX 4: SWIPE HINT MÁS DISCRETO === */
    .swipe-hint {
        background: transparent !important;
        backdrop-filter: none !important;
        padding: 4px 12px !important;
        font-size: 0.75rem !important;
        color: rgba(255, 255, 255, 0.5) !important;
        font-weight: 400 !important;
        margin-top: 8px !important;
    }
    
    .swipe-hint i {
        font-size: 0.9rem !important;
    }
    
    /* === FIX 5: ASEGURAR OVERFLOW OCULTO === */
    body {
        overflow-x: hidden !important;
    }
    
    .content {
        overflow-x: hidden !important;
        max-width: 100vw !important;
    }
    
    .features-dashboard,
    .tech-stack-section,
    .screenshots-section {
        overflow-x: hidden !important;
        max-width: 100% !important;
    }
    
    /* === FIX 6: ELIMINAR ESPACIOS LATERALES === */
    .carousel-container .level-card,
    .carousel-container .feature-card,
    .carousel-container .tech-item,
    .carousel-container .screenshot-placeholder,
    .levels-carousel-container .level-card {
        margin: 0 !important;
    }
    
    /* === FIX 7: HACER FADE MÁS PRONUNCIADO === */
    @supports (mask-composite: exclude) or (-webkit-mask-composite: source-out) {
        .carousel-container .levels-grid,
        .carousel-container .features-grid,
        .carousel-container .tech-grid,
        .carousel-container .screenshots-grid,
        .levels-carousel-container .levels-grid {
            -webkit-mask-image: 
                linear-gradient(to right, transparent, black 25px, black calc(100% - 25px), transparent),
                linear-gradient(black, black) !important;
            -webkit-mask-composite: source-in !important;
            mask-image: 
                linear-gradient(to right, transparent, black 25px, black calc(100% - 25px), transparent),
                linear-gradient(black, black) !important;
            mask-composite: intersect !important;
        }
    }
}

/* === FIX ESPECÍFICO PARA SAFARI iOS === */
@supports (-webkit-touch-callout: none) {
    @media (max-width: 768px) {
        .carousel-container .levels-grid,
        .carousel-container .features-grid,
        .carousel-container .tech-grid,
        .carousel-container .screenshots-grid,
        .levels-carousel-container .levels-grid {
            -webkit-mask-image: -webkit-linear-gradient(
                left,
                rgba(0,0,0,0) 0px,
                rgba(0,0,0,1) 20px,
                rgba(0,0,0,1) calc(100% - 20px),
                rgba(0,0,0,0) 100%
            ) !important;
        }
    }
}

/* === FIX PANTALLAS MUY PEQUEÑAS === */
@media (max-width: 374px) {
    .carousel-indicator {
        width: 5px !important;
        height: 5px !important;
    }
    
    .carousel-indicator.active {
        width: 14px !important;
    }
}